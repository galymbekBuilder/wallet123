<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Цифровые документы</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff" />
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0c;
      --sub:#6a6a6a;
      --blue:#155EE1;
      --blue-press:#0E4AB4;
      --border:#E6E6E6;
      --seg-bg:#F1F0F0;
      --btn-outline:#2E6BE6;
      --shadow:0 1px 2px rgba(0,0,0,0.03), 0 8px 24px rgba(0,0,0,0.06);
      --radius:14px;
    }
    *{box-sizing: border-box; -webkit-tap-highlight-color: transparent;}
    html,body{height:100%;}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--text);
    }
    .app{
      max-width: 375px;
      margin:0 auto;
      min-height:100dvh;
      display:flex;
      flex-direction:column;
    }
    header{
      position:sticky; top:0;
      background:#fff;
      padding:16px 16px 10px;
      box-shadow: var(--shadow);
      z-index:5;
    }
    .back{
      width:24px; height:24px; display:inline-flex; align-items:center; justify-content:center;
      margin-right:8px; cursor:pointer;
    }
    .back svg{display:block;}
    .title{
      font-size:18px; font-weight:700; line-height:1.2;
    }
    .section-title{
      margin:12px 16px 8px; font-size:18px; font-weight:700;
    }
    .content{padding:0 16px 20px; flex:1;}
    .list{
      border-radius:16px;
    }
    .cell{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 8px 12px 0;
    }
    .cell + .cell{border-top:1px solid var(--border);}
    .cell .left{display:flex; align-items:center; gap:12px;}
    .doc-icon{
      width:32px; height:32px; border-radius:10px; background:#F1F0F0; display:grid; place-items:center;
    }
    .doc-icon svg{width:18px; height:18px;}
    .cell .label{font-size:16px;}
    .chev{width:20px; height:20px; opacity:.5;}
    .btn{
      border:none; background:var(--blue); color:#fff; width:100%; border-radius:12px; padding:14px 16px; font-size:14px; font-weight:600;
      display:flex; align-items:center; justify-content:center; gap:10px; cursor:pointer;
    }
    .btn:active{background:var(--blue-press);}
    .btn-outline{
      border:2px solid var(--btn-outline); color:var(--btn-outline); background:#fff;
    }
    .btn + .btn{margin-top:14px;}
    .refresh-wrap{padding:0 16px 24px;}
    .refresh{border:1px solid #2E6BE6; color:#2E6BE6; background:#fff; width:100%; border-radius:8px; padding:10px; font-size:12px; font-weight:600; cursor:pointer;}
    /* Segmented control */
    .seg{
      margin:0 16px; background:var(--seg-bg); border-radius:12px; padding:2px; display:flex; gap:2px;
    }
    .seg button{
      flex:1; background:transparent; border:none; padding:8px 0; border-radius:10px; font-weight:600; cursor:pointer; font-size:13px;
    }
    .seg .active{background:#fff; box-shadow:var(--shadow);}
    /* Pages */
    .page{display:none; flex-direction:column; min-height:100%;}
    .page.active{display:flex;}
    .screen-body{flex:1; display:flex; flex-direction:column;}
    /* Upload area */
    .upload-wrap{
      flex:1;
      display:flex; align-items:center; justify-content:center;
      padding:16px;
    }
    .dropzone{
      width:86%; max-width:280px; min-height:220px;
      border:2px dashed #D8D8D8; border-radius:16px;
      display:flex; align-items:center; justify-content:center; text-align:center;
      padding:16px;
    }
    .dropzone button{border:1px solid #C9C9C9; background:#fff; border-radius:10px; padding:10px 12px; font-weight:600; font-size:13px; cursor:pointer;}
    .preview{
      display:none; align-items:center; justify-content:center;
      width:100%;
    }
    .preview img{max-width:86%; border-radius:12px; box-shadow:var(--shadow);}
    /* Details list */
    .details{padding:0 16px 90px;}
    .kv{margin:16px 0;}
    .kv .k{font-size:12px; color:#8A8A8A; margin-bottom:6px;}
    .kv .v{font-size:14px; color:#0b0b0c;}
    /* Bottom area */
    .bottom{
      padding:16px; position:sticky; bottom:0; background:#fff; box-shadow: 0 -6px 16px rgba(0,0,0,0.05);
    }
    /* Utility */
    .hidden{display:none!important;}
  </style>
</head>
<body>
  <div class="app">
    <!-- PAGE 1 -->
    <section class="page active" id="page-list">
      <header>
        <div class="title">Цифровые документы</div>
      </header>
      <div class="section-title">Мои документы</div>
      <div class="content">
        <div class="list card">
          <div class="cell" id="open-doc">
            <div class="left">
              <div class="doc-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <rect x="4" y="3" width="16" height="18" rx="3" stroke="#7A7A7A" />
                  <rect x="7" y="7" width="10" height="3" rx="1" fill="#7A7A7A"/>
                  <rect x="7" y="12" width="10" height="1.8" rx=".9" fill="#B5B5B5"/>
                </svg>
              </div>
              <div class="label">Удостоверение личности</div>
            </div>
            <svg class="chev" viewBox="0 0 24 24" fill="none">
              <path d="M9 5l7 7-7 7" stroke="#6e6e6e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
      </div>
      <div class="refresh-wrap">
        <button class="refresh">Обновить список документов</button>
      </div>
    </section>

    <!-- PAGE 2 -->
    <section class="page" id="page-doc">
      <header>
        <div class="back" id="back-from-doc" aria-label="Назад">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M15 19l-7-7 7-7" stroke="#111" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="title">Удостоверение личности</div>
      </header>

      <div class="seg" role="tablist">
        <button class="active" id="tab-doc">Документ</button>
        <button id="tab-req">Реквизиты</button>
      </div>

      <div class="screen-body">
        <div class="upload-wrap">
          <div class="dropzone" id="dropzone">
            <div>
              <button id="add-photo">Добавить фото</button>
              <input type="file" id="file-input" accept="image/*" style="display:none">
            </div>
          </div>
          <div class="preview" id="preview">
            <img id="preview-img" alt="Добавленное изображение">
          </div>
        </div>
        <div class="bottom">
          <button class="btn" id="show-doc">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M3 5h18M3 12h18M3 19h18" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Предъявить документ
          </button>
          <button class="btn btn-outline">Отправить документ</button>
        </div>
      </div>
    </section>

    <!-- PAGE 3 -->
    <section class="page" id="page-req">
      <header>
        <div class="back" id="back-from-req" aria-label="Назад">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M15 19l-7-7 7-7" stroke="#111" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="title">Удостоверение личности</div>
      </header>

      <div class="seg" role="tablist">
        <button id="tab-doc-2">Документ</button>
        <button class="active" id="tab-req-2">Реквизиты</button>
      </div>

      <div class="details">
        <div class="kv">
          <div class="k">ФИО</div>
          <div class="v">Аманжан Галымбек Арманулы</div>
        </div>

        <div class="kv">
          <div class="k">ИИН</div>
          <div class="v">031202550128</div>
        </div>

        <div class="kv">
          <div class="k">Дата рождения</div>
          <div class="v">02.12.2003</div>
        </div>

        <div class="kv">
          <div class="k">Номер документа</div>
          <div class="v">060756844</div>
        </div>

        <div class="kv">
          <div class="k">Дата выдачи</div>
          <div class="v">21.12.2019</div>
        </div>

        <div class="kv">
          <div class="k">Срок действия</div>
          <div class="v">20.12.2029</div>
        </div>
      </div>

      <div class="bottom">
        <button class="btn btn-outline">Отправить реквизиты</button>
      </div>
    </section>
  </div>

  <script>
    // Simple page navigation
    const pageList = document.getElementById('page-list');
    const pageDoc = document.getElementById('page-doc');
    const pageReq = document.getElementById('page-req');

    const openDoc = document.getElementById('open-doc');
    const backFromDoc = document.getElementById('back-from-doc');
    const backFromReq = document.getElementById('back-from-req');

    const tabReq = document.getElementById('tab-req');
    const tabDoc = document.getElementById('tab-doc');
    const tabDoc2 = document.getElementById('tab-doc-2');

    function show(el){
      [pageList, pageDoc, pageReq].forEach(p=>p.classList.remove('active'));
      el.classList.add('active');
      window.scrollTo({top:0, behavior:'instant'});
    }

    openDoc.addEventListener('click', ()=> show(pageDoc));
    backFromDoc.addEventListener('click', ()=> show(pageList));
    backFromReq.addEventListener('click', ()=> show(pageList));

    tabReq.addEventListener('click', ()=> show(pageReq));
    tabDoc2.addEventListener('click', ()=> show(pageDoc));

    // Image upload (only once; hide controls after added)
    const addPhotoBtn = document.getElementById('add-photo');
    const fileInput = document.getElementById('file-input');
    const dropzone = document.getElementById('dropzone');
    const preview = document.getElementById('preview');
    const previewImg = document.getElementById('preview-img');

    addPhotoBtn.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=>{
      const file = e.target.files && e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = (ev)=>{
        previewImg.src = ev.target.result;
        preview.style.display = 'flex';
        dropzone.classList.add('hidden'); // hide controls so user can't change
      };
      reader.readAsDataURL(file);
    });

    // PWA service worker
    if('serviceWorker' in navigator){
      window.addEventListener('load', ()=>{
        navigator.serviceWorker.register('sw.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
